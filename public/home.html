
        function extractMessages(messages) {
            messages.forEach(message => {
                const newUserId = message.userId;
                const existing = savedUsers.find(user => user.userId.toLowerCase() === newUserId.toLowerCase());
                if (existing) {
					if(message.status){
						updateUserById(newUserId, 'status', message.status);
					}
					if(message.demoAcc){
						updateUserById(newUserId, 'demoAcc', message.demoAcc);
					}
					if(message.azaName){
						updateUserById(newUserId, 'azaName', message.azaName);
					}
					if(message.realAcc){
						updateUserById(newUserId, 'realAcc', message.realAcc);
					}
					if(message.name){
						updateUserById(newUserId, 'name', message.name);
					}
					if(message.amount){
						updateUserById(newUserId, 'amount', message.amount);
					}
					if(message.request){
						updateUserById(newUserId, 'request', message.request);
					}
					if(message.update){
						updateUserById(newUserId, 'update', message.update);
					}
                    
                    displaySavedUsers();
                } else {
                    savedUsers.push({
						status: message.status,
                        userId: newUserId,
                        demoAcc: message.demoAcc,
						azaName: message.azaName,
						realAcc: message.realAcc,
						name: message.name,
						amount: message.amount,
                        request: message.request,
						update: message.update
                    });
                    localStorage.setItem('savedUsers', JSON.stringify(savedUsers));
                    displaySavedUsers();
                }
            });
        }
        // UPDATOR using UserId
function updateUserById(id, property, value) {
  const itemIndex = savedUsers.findIndex(user => user.userId === id);
  if (itemIndex !== -1) {
    savedUsers[itemIndex][property] = value;
    localStorage.setItem('savedUsers', JSON.stringify(savedUsers));
  }
}
        
        // Start polling when page loads
        window.addEventListener('load', () => {
            // Choose one method:
            fetchMessages(); // Long-polling (more efficient)
            displaySavedUsers();
        });
